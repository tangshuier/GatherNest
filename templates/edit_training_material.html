{% extends 'base.html' %}

{% block title %}ç¼–è¾‘åŸ¹è®­èµ„æ–™ - ç®¡ç†å‘˜é¢æ¿{% endblock %}
{% block page_title %}ç¼–è¾‘åŸ¹è®­èµ„æ–™{% endblock %}

{% block content %}
<div class="container mt-6">
    <div class="card shadow-lg p-6 mb-6 bg-white rounded border border-gray-100">
        <h2 class="text-primary mb-6">ç¼–è¾‘åŸ¹è®­èµ„æ–™</h2>
        
        <form action="{{ url_for('training.edit_training_material', material_id=material.id) }}" method="post" enctype="multipart/form-data">
            <!-- ç±»åˆ«é€‰æ‹© -->
            <div class="form-group mb-5">
                <label for="category" class="form-label font-weight-medium text-gray-700 mb-2">åŸ¹è®­ç±»åˆ« <span class="text-danger">*</span></label>
                <select class="form-control form-control-lg border-gray-300 rounded-md transition-all duration-200 hover:border-primary focus:border-primary focus:ring-2 focus:ring-primary/20" id="category" name="category" required>
                    <option value="">è¯·é€‰æ‹©ç±»åˆ«</option>
                    {% for category in categories %}
                        <option value="{{ category }}" {% if category == material.category %}selected{% endif %}>{{ category }}</option>
                    {% endfor %}
                </select>
                <small class="form-text text-gray-500 mt-1">é€‰æ‹©æœ€é€‚åˆè¯¥åŸ¹è®­èµ„æ–™çš„åˆ†ç±»</small>
            </div>
            
            <!-- æ ‡é¢˜ -->
            <div class="form-group mb-5">
                <label for="title" class="form-label font-weight-medium text-gray-700 mb-2">èµ„æ–™æ ‡é¢˜ <span class="text-danger">*</span></label>
                <input type="text" class="form-control form-control-lg border-gray-300 rounded-md transition-all duration-200 hover:border-primary focus:border-primary focus:ring-2 focus:ring-primary/20" id="title" name="title" value="{{ material.title }}" required placeholder="è¾“å…¥èµ„æ–™æ ‡é¢˜">
                <small class="form-text text-gray-500 mt-1">è¯·è¾“å…¥æ˜ç¡®çš„èµ„æ–™æ ‡é¢˜ï¼Œä¾¿äºå­¦å‘˜è¯†åˆ«</small>
            </div>
            
            <!-- æè¿° -->
            <div class="form-group mb-5">
                <label for="description" class="form-label font-weight-medium text-gray-700 mb-2">èµ„æ–™æè¿°</label>
                <textarea class="form-control form-control-lg border-gray-300 rounded-md transition-all duration-200 hover:border-primary focus:border-primary focus:ring-2 focus:ring-primary/20" id="description" name="description" rows="4" placeholder="è¾“å…¥èµ„æ–™æè¿°">{{ material.description }}</textarea>
                <small class="form-text text-gray-500 mt-1">ç®€è¦æè¿°è¯¥åŸ¹è®­èµ„æ–™çš„å†…å®¹å’Œç”¨é€”</small>
            </div>
            
            <!-- æ–‡ä»¶ç±»å‹ -->
            <div class="form-group mb-5">
                <label for="file_type" class="form-label font-weight-medium text-gray-700 mb-2">æ–‡ä»¶ç±»å‹ <span class="text-danger">*</span></label>
                <select class="form-control form-control-lg border-gray-300 rounded-md transition-all duration-200 hover:border-primary focus:border-primary focus:ring-2 focus:ring-primary/20" id="file_type" name="file_type" required>
                    <option value="pdf" {% if material.file_type == 'pdf' %}selected{% endif %}>ğŸ“„ PDFæ–‡æ¡£</option>
                    <option value="docx" {% if material.file_type == 'docx' %}selected{% endif %}>ğŸ“ Wordæ–‡æ¡£</option>
                    <option value="xlsx" {% if material.file_type == 'xlsx' %}selected{% endif %}>ğŸ“Š Excelè¡¨æ ¼</option>
                    <option value="pptx" {% if material.file_type == 'pptx' %}selected{% endif %}>ğŸï¸ PowerPointæ¼”ç¤ºæ–‡ç¨¿</option>
                    <option value="mp4" {% if material.file_type == 'mp4' %}selected{% endif %}>ğŸ¬ MP4è§†é¢‘</option>
                    <option value="avi" {% if material.file_type == 'avi' %}selected{% endif %}>ğŸ¬ AVIè§†é¢‘</option>
                    <option value="mov" {% if material.file_type == 'mov' %}selected{% endif %}>ğŸ¬ MOVè§†é¢‘</option>
                    <option value="wmv" {% if material.file_type == 'wmv' %}selected{% endif %}>ğŸ¬ WMVè§†é¢‘</option>
                    <option value="txt" {% if material.file_type == 'txt' %}selected{% endif %}>ğŸ“„ æ–‡æœ¬æ–‡ä»¶</option>
                    <option value="md" {% if material.file_type == 'md' %}selected{% endif %}>ğŸ“ Markdownæ–‡ä»¶</option>
                    <option value="other" {% if material.file_type == 'other' %}selected{% endif %}>ğŸ“ å…¶ä»–ç±»å‹</option>
                </select>
                <small class="form-text text-gray-500 mt-1">è¯·é€‰æ‹©æ‚¨è¦ä¸Šä¼ çš„æ–‡ä»¶æ ¼å¼</small>
            </div>
            
            <!-- æ˜¯å¦å¿…å­¦ -->
            <div class="form-group mb-5">
                <div class="form-check p-3 bg-gray-50 rounded-md border border-gray-200 transition-all duration-200 hover:bg-gray-100">
                    <input class="form-check-input h-5 w-5 text-primary rounded transition-transform duration-200 hover:scale-110 focus:ring-primary/30" type="checkbox" id="is_required" name="is_required" {% if material.is_required %}checked{% endif %}>
                    <label class="form-check-label text-gray-700 ml-2 font-medium cursor-pointer" for="is_required">
                        å¿…å­¦èµ„æ–™
                    </label>
                    <small class="form-text text-gray-500 block mt-1 ml-7">æ ‡è®°ä¸ºå¿…å­¦èµ„æ–™çš„å†…å®¹ï¼Œæ‰€æœ‰ç›¸å…³å­¦å‘˜éƒ½éœ€è¦å®Œæˆå­¦ä¹ </small>
                </div>
            </div>
            
            <!-- æ˜¾ç¤ºé¡ºåº -->
            <div class="form-group mb-5">
                <label for="display_order" class="form-label font-weight-medium text-gray-700 mb-2">æ˜¾ç¤ºé¡ºåº</label>
                <input type="number" class="form-control form-control-lg border-gray-300 rounded-md transition-all duration-200 hover:border-primary focus:border-primary focus:ring-2 focus:ring-primary/20" id="display_order" name="display_order" value="{{ material.display_order }}" min="0">
                <small class="form-text text-gray-500 mt-1">æ•°å€¼è¶Šå°ï¼Œè¯¥èµ„æ–™åœ¨åˆ—è¡¨ä¸­æ˜¾ç¤ºçš„ä½ç½®è¶Šé å‰</small>
            </div>
            
            <!-- å½“å‰æ–‡ä»¶ -->
            {% if material.file_path %}
            <div class="form-group mb-5">
                <label class="form-label font-weight-medium text-gray-700 mb-2">å½“å‰æ–‡ä»¶</label>
                <div class="alert alert-info">
                    <i class="fas fa-file"></i> {{ material.file_path.split('/')[-1] }}
                </div>
            </div>
            {% endif %}
            
            <!-- æ–‡ä»¶ä¸Šä¼  -->
            <div class="form-group mb-6">
                <label for="file" class="form-label font-weight-medium text-gray-700 mb-2">ä¸Šä¼ æ–°æ–‡ä»¶</label>
                <div class="p-4 border-2 border-dashed border-gray-300 rounded-lg transition-all duration-200 hover:border-primary hover:bg-primary/5">
                    <input type="file" class="form-control-file" id="file" name="file">
                    <small class="form-text text-gray-500 mt-2">æ”¯æŒçš„æ–‡ä»¶æ ¼å¼ï¼šPDF, Word, Excel, PowerPoint, MP4, AVI, MOV, WMV, Markdownç­‰</small>
                    {% if material.file_path %}
                    <small class="form-text text-danger block mt-1">æ³¨æ„ï¼šä¸Šä¼ æ–°æ–‡ä»¶å°†æ›¿æ¢ç°æœ‰æ–‡ä»¶</small>
                    {% endif %}
                </div>
            </div>
            
            <!-- æ“ä½œæŒ‰é’® -->
            <div class="form-group d-flex justify-content-center gap-4">
                <button type="submit" class="btn btn-primary btn-lg px-6 py-2 transition-all duration-200 hover:bg-primary/90 hover:shadow-lg transform hover:-translate-y-0.5">
                    <i class="fas fa-save mr-2"></i> ä¿å­˜ä¿®æ”¹
                </button>
                <a href="{{ url_for('training.training_materials_manage') }}" class="btn btn-secondary btn-lg px-6 py-2 transition-all duration-200 hover:bg-secondary/90 hover:shadow-lg transform hover:-translate-y-0.5">
                    <i class="fas fa-arrow-left mr-2"></i> è¿”å›
                </a>
            </div>
        </form>
    </div>
</div>

<style>
    /* è¡¨å•ç›¸å…³æ ·å¼ */
    .form-group {
        margin-bottom: 1.8rem;
    }
    
    .form-label {
        font-weight: 500;
        margin-bottom: 0.5rem;
        display: block;
    }
    
    .form-control {
        border-radius: 0.5rem;
        padding: 0.75rem 1rem;
        border-width: 1px;
    }
    
    .form-control:focus {
        box-shadow: 0 0 0 0.25rem rgba(0, 123, 255, 0.25);
    }
    
    .font-weight-medium {
        font-weight: 500;
    }
    
    .text-gray-700 {
        color: #374151;
    }
    
    .text-gray-500 {
        color: #6b7280;
    }
    
    .mb-2 {
        margin-bottom: 0.5rem;
    }
    
    .form-control-lg {
        font-size: 1rem;
        padding: 0.75rem 1rem;
        border-radius: 0.375rem;
    }
    
    .border-gray-300 {
        border-color: #d1d5db;
    }
    
    .bg-gray-50 {
        background-color: #f9fafb;
    }
    
    .bg-gray-100 {
        background-color: #f3f4f6;
    }
    
    .hover\:bg-primary\/5:hover {
        background-color: rgba(0, 123, 255, 0.05);
    }
    
    .hover\:bg-primary\/90:hover {
        background-color: rgba(0, 123, 255, 0.9);
    }
    
    .hover\:bg-secondary\/90:hover {
        background-color: rgba(108, 117, 125, 0.9);
    }
    
    .hover\:shadow-lg:hover {
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    }
    
    .transition-all {
        transition-property: all;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        transition-duration: 150ms;
    }
    
    .transition-transform {
        transition-property: transform;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        transition-duration: 150ms;
    }
    
    .duration-200 {
        transition-duration: 200ms;
    }
    
    .hover\:-translate-y-0\.5:hover {
        transform: translateY(-0.125rem);
    }
    
    .hover\:scale-110:hover {
        transform: scale(1.1);
    }
    
    .rounded-md {
        border-radius: 0.375rem;
    }
    
    .transition-all {
        transition-property: all;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .duration-200 {
        transition-duration: 200ms;
    }
    
    .hover\:border-primary:hover {
        border-color: #1e40af;
    }
    
    .focus\:border-primary:focus {
        border-color: #1e40af;
    }
    
    .focus\:ring-2:focus {
        outline: 2px solid transparent;
        outline-offset: 2px;
        box-shadow: 0 0 0 2px currentColor;
    }
    
    .focus\:ring-primary\/20:focus {
        box-shadow: 0 0 0 0.25rem rgba(0, 123, 255, 0.2);
    }
    
    .focus\:ring-primary\/30:focus {
        box-shadow: 0 0 0 0.25rem rgba(0, 123, 255, 0.3);
    }
    
    /* ä¸ºè¡¨å•æ·»åŠ å†…è¾¹è·ï¼Œç¡®ä¿å†…å®¹ä¸ç´§è´´è¾¹ç¼˜ */
    form {
        padding: 1rem;
    }
    
    /* ç¡®ä¿form-groupæœ‰å·¦å³è¾¹è·ï¼Œé˜²æ­¢æ§ä»¶ç´§è´´å¤–æ¡† */
    .form-group {
        margin-left: 0.5rem;
        margin-right: 0.5rem;
    }
    
    /* ä¸ºå¡ç‰‡å†…çš„å†…å®¹æ·»åŠ å†…è¾¹è· */
    .card > h2 {
        margin-left: 0.5rem;
        margin-right: 0.5rem;
    }
    
    .mt-1 {
        margin-top: 0.25rem;
    }
    
    .mt-2 {
        margin-top: 0.5rem;
    }
    
    .mb-5 {
        margin-bottom: 1.25rem;
    }
    
    .mb-6 {
        margin-bottom: 1.5rem;
    }
    
    /* å¤é€‰æ¡†æ ·å¼ */
    .bg-gray-50 {
        background-color: #f9fafb;
    }
    
    .border-gray-200 {
        border-color: #e5e7eb;
    }
    
    .hover\:bg-gray-100:hover {
        background-color: #f3f4f6;
    }
    
    .h-5 {
        height: 1.25rem;
    }
    
    .w-5 {
        width: 1.25rem;
    }
    
    .text-primary {
        color: #1e40af;
    }
    
    .rounded {
        border-radius: 0.25rem;
    }
    
    .transition-transform {
        transition-property: transform;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .hover\:scale-110:hover {
        transform: scale(1.1);
    }
    
    .focus\:ring-primary\/30:focus {
        --tw-ring-color: rgba(30, 64, 175, 0.3);
        ring-color: var(--tw-ring-color);
    }
    
    .ml-2 {
        margin-left: 0.5rem;
    }
    
    .cursor-pointer {
        cursor: pointer;
    }
    
    .block {
        display: block;
    }
    
    .ml-7 {
        margin-left: 1.75rem;
    }
    
    /* æ–‡ä»¶ä¸Šä¼ åŒºåŸŸ */
    .border-2 {
        border-width: 2px;
    }
    
    .border-dashed {
        border-style: dashed;
    }
    
    .rounded-lg {
        border-radius: 0.5rem;
    }
    
    .hover\:border-primary:hover {
        border-color: #1e40af;
    }
    
    .hover\:bg-primary\/5:hover {
        background-color: rgba(30, 64, 175, 0.05);
    }
    
    /* æŒ‰é’®æ ·å¼ */
    .d-flex {
        display: flex;
    }
    
    .justify-content-center {
        justify-content: center;
    }
    
    .gap-4 {
        gap: 1rem;
    }
    
    .btn-lg {
        font-size: 1rem;
        padding: 0.5rem 1rem;
        border-radius: 0.375rem;
    }
    
    .px-6 {
        padding-left: 1.5rem;
        padding-right: 1.5rem;
    }
    
    .py-2 {
        padding-top: 0.5rem;
        padding-bottom: 0.5rem;
    }
    
    .justify-content-center {
        justify-content: center;
    }
    
    .gap-4 {
        gap: 1rem;
    }
    
    .cursor-pointer {
        cursor: pointer;
    }
    
    .block {
        display: block;
    }
    
    .w-5 {
        width: 1.25rem;
    }
    
    .h-5 {
        height: 1.25rem;
    }
    
    .mr-2 {
        margin-right: 0.5rem;
    }
    
    .px-6 {
        padding-left: 1.5rem;
        padding-right: 1.5rem;
    }
    
    .py-2 {
        padding-top: 0.5rem;
        padding-bottom: 0.5rem;
    }
</style>
{% endblock %}