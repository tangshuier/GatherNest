{% extends 'base.html' %}

{% block title %}申请进度修改 - 项目管理系统{% endblock %}
{% block page_title %}申请修改结单项目进度{% endblock %}

{% block content %}
<div class="section fade-in">
    <div class="card">
        <div class="card-header">
            <h3>申请修改项目进度</h3>
        </div>
        <div class="card-body">
            <p><strong>项目ID:</strong> {{ project.id }}</p>
            <p><strong>项目名称:</strong> {{ project.name }}</p>
            <p><strong>当前进度:</strong> <span class="badge badge-secondary">{{ project.progress }}</span></p>
            
            <form method="POST" action="{{ url_for('user.request_progress_change', project_id=project.id) }}">
                <div class="form-group">
                    <label for="requested_progress">请求修改为:</label>
                    <select name="requested_progress" id="requested_progress" class="form-control" required>
                        {% for progress in allowed_progresses %}
                        <option value="{{ progress }}">{{ progress }}</option>
                        {% endfor %}
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="reason">申请原因:</label>
                    <textarea name="reason" id="reason" class="form-control" rows="4" required placeholder="请详细说明需要修改进度的原因..."></textarea>
                </div>
                
                <div class="form-group">
                    <button type="submit" class="btn btn-primary">提交申请</button>
                    <a href="{{ url_for('user.engineer_projects') }}" class="btn btn-secondary">取消</a>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}